<ui:composition template="../Views/index.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"                
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="page_content">
        <div class="cabecera" >
            <div class="titulo" >
                Informacion del Curso #{informacionCurso.curso.asignaturaCurso.nombreAsignatura} del semestre #{informacionCurso.curso.semestreCurso} dictado en el año #{informacionCurso.curso.anioCurso}
            </div>
        </div>
        <Script>
            $(document).ready(function() {
                var color1 =  numeroRandom =  Math.floor((Math.random() * 18));
                var color3 =  numeroRandom =  Math.floor((Math.random() * 18));
                var datosDocente ={
                    labels: #{resultadoEncuesta.tituloPreguntasDocente},
                    datasets: [{
                            label: '#{resultadoEncuesta.encuestaSeleccionada.cursoEncuesta.asignaturaCurso.nombreAsignatura}',
                            fillColor: getColor(0.5,color1),
                            strokeColor: getColor(1,color1),
                            pointColor: "rgba(220,220,220,1)",
                            pointStrokeColor: "#fff",
                            pointHighlightFill: "#fff",
                            pointHighlightStroke: "rgba(220,220,220,1)",
                            data: #{resultadoEncuesta.promediosPreguntasDocente}
                        }]
                };
                var datosCurso ={
                    labels: #{resultadoEncuesta.tituloPreguntasCurso},
                    datasets: [{
                            label: '#{resultadoEncuesta.encuestaSeleccionada.cursoEncuesta.asignaturaCurso.nombreAsignatura}',
                            fillColor: getColor(0.5,color3),
                            strokeColor: getColor(1,color3),
                            pointColor: "rgba(220,220,220,1)",
                            pointStrokeColor: "#fff",
                            pointHighlightFill: "#fff",
                            pointHighlightStroke: "rgba(220,220,220,1)",
                            data: #{resultadoEncuesta.promediosPreguntasCurso}
                        }]
                };

                var opciones = {
                    animationSteps : 200,
                    bezierCurve: false,
                    datasetFill : true // colorea la serie de la grafica
                };                                
                    
                var ctxDoc = $("#resDoocente").get(0).getContext("2d");
                var ctxCurso = $("#resCurso").get(0).getContext("2d");
                var docenteChart = new Chart(ctxDoc).Line(datosDocente, opciones);
                var cursoChart = new Chart(ctxCurso).Line(datosCurso, opciones);

            });
        </Script>
        
        <div id="contenedor">
            <div class="ListItemContainer ListItemClick" style="text-align: center" >
                Informacion Basica del Curso
            </div>
            
            <div class="ListItemContainer" >
                <div class="negrita" style="margin-left: 20px">Asignatura: #{informacionCurso.curso.asignaturaCurso.nombreAsignatura}</div>
            </div>
            <div class="ListItemContainer" >
                <div class="negrita" style="margin-left: 20px">Año Dictado: #{informacionCurso.curso.anioCurso}</div>
            </div>
            <div class="ListItemContainer" >
                <div class="negrita" style="margin-left: 20px">Semestre Correspondiente: #{informacionCurso.curso.semestreCurso}</div>
            </div>
            <div class="ListItemContainer" >
                <div class="negrita" style="margin-left: 20px">Creditos: #{informacionCurso.curso.asignaturaCurso.creditosAsignatura}</div>
            </div>
            
            <h:panelGroup rendered="#{!empty resultadoEncuesta.mapResultadoCurso}">
                <div class="ListItemContainer" style="text-align: center" >
                    <div class="negrita" style="margin-left: 20px">Resultado de Encuestas</div>
                    <a href="../Encuesta/InformacionEncuesta.xhtml?id=#{informacionCurso.curso.encuestaCurso.idEncuesta}" class="SubmenuLink">
                        <div title="Comparar Encuestas" class="optionItem" style="background-image: url(../Resources/Images/grafica.png)"></div>
                    </a>
                    <a href="#ModalEncuestaDocente" class="SubmenuLink">
                        <div title="Informacion Detallada de la Encuesta" class="optionItem" style="background-image: url(../Resources/Images/listar.png)"></div>
                    </a>
                </div>
                <div class="GraficaContainer" style="height: 200px" >
                    <canvas id="resCurso" style="width: 100%; height: 200px"></canvas>
                </div>
                <div class="GraficaContainer" style="font-size: 18px; text-shadow: none;" >
                    <table style="border: 1px silver;">
                        <c:forEach items="#{resultadoEncuesta.mapTextoPreguntasCurso.entrySet()}" var="label">                        
                            <tr>
                                <td>Pregunta #{label.key}</td>
                                <td>#{label.value}</td>
                            </tr>                        
                        </c:forEach>
                    </table>
                </div>
            </h:panelGroup>
        </div>
        
        <div id="contenedor">
            <div class="ListItemContainer ListItemClick" style="text-align: center" >
                Docente del Curso 
            </div>
            <div class="ListItemContainer" >
                <div class="item">
                    #{informacionCurso.docente.cedulaUsuario}
                </div>
                <div class="item">
                    #{informacionCurso.docente.nombreCompleto}
                </div>
                <div class="item">
                    #{informacionCurso.docente.correoUsuario}
                </div>
            </div>
            <h:panelGroup rendered="#{!empty resultadoEncuesta.mapResultadoDocente}">
                <div class="ListItemContainer" style="text-align: center" >
                    <div class="negrita" style="margin-left: 20px">Resultado de Encuestas</div>
                    <a href="../Encuesta/InformacionEncuesta.xhtml?id=#{informacionCurso.curso.encuestaCurso.idEncuesta}" class="SubmenuLink">
                        <div title="Comparar Encuestas" class="optionItem" style="background-image: url(../Resources/Images/grafica.png)"></div>
                    </a>
                    <a href="#ModalEncuestaDocente" class="SubmenuLink">
                        <div title="Informacion Detallada de la Encuesta" class="optionItem" style="background-image: url(../Resources/Images/listar.png)"></div>
                    </a>
                </div>
                <div class="GraficaContainer" style="height: 200px" >
                    <canvas id="resDoocente" style="width: 100%; height: 200px"></canvas>
                </div>
                <div class="GraficaContainer" style="font-size: 18px; text-shadow: none;" >
                    <table style="border: 1px silver;">
                        <c:forEach items="#{resultadoEncuesta.mapTextoPreguntasDocente.entrySet()}" var="titulo">                        
                            <tr>
                                <td>Pregunta #{titulo.key}</td>
                                <td>#{titulo.value}</td>
                            </tr>                        
                        </c:forEach>
                    </table>
                </div>
            </h:panelGroup>
            <div class="ListItemContainer" style="width: 300px; margin-top: -10px; text-align: center;" >
                <a href="#openModal" style="text-decoration: none;">
                    <div class="negrita" style="margin-left: 20px">Ver Contrato de Docente</div>
                </a>
            </div>
        </div>
        
        <div id="openModal" class="modalDialog">
            <div style="width: 1000px;">
                <a href="#close" title="Close" class="close">X</a>
                <h2> Contraro de Docente</h2>
                
                <!--para cambiar por formulario de inscripcion-->
                <div style="width: 1000px; height: 1000px; background-image: url(#{informacionCurso.docente.imagenUsuario}); background-size: contain;"></div>
                
            </div>
        </div>
        
        <div id="contenedor">
            <div class="ListItemContainer ListItemClick" style="text-align: center" >
                Alumnos del Curso
            </div>
            <h:panelGroup rendered="#{empty informacionCurso.estudiantes}">
                <div class="ListItemContainer" >
                    Lista de Estudiantes Vacia
                </div>            
            </h:panelGroup>
            <c:forEach var="estudiante" items="#{informacionCurso.estudiantes}">
                <div class="ListItemContainer" >
                    <div class="item">
                        #{estudiante.cedulaUsuario}
                    </div>
                    <div class="item">
                        #{estudiante.nombreCompleto}
                    </div>
                    <div class="item">
                        #{estudiante.correoUsuario}
                    </div>
                    <a href="../Estudiante/InformacionEstudiante.xhtml?id=#{estudiante.idUsuario}" class="SubmenuLink">
                        <div title="Mas Informacion" class="optionItem" style="background-image: url(../Resources/Images/Info.png)"></div>
                    </a>
                </div>            
            </c:forEach>
        </div>
        
        <div id="ModalEncuestaDocente" class="modalDialog">
            <div style="width: 1000px;">
                <a href="#close" title="Close" class="close">X</a>
                <h2> Detalles de la Encuesta</h2>
                
                <table>
                    <c:forEach items="#{resultadoEncuesta.encuestaSeleccionada.respuestasEncuesta}" varStatus="indice" var="pregunta">                        
                        <tr>
                            <td>Pregunta #{indice.index}:</td>
                            <c:forEach items="#{pregunta.respuestasEncuesta}" var="respuesta">
                                <td>#{respuesta.resultadoRespuesta}</td>
                            </c:forEach>           
                        </tr>                        
                    </c:forEach>
                </table>
                
            </div>
        </div>
        
    </ui:define>
</ui:composition>
